<!doctype html>
<html lang="en">
  <head>
    <title>oscd-scl-dialogs Demo</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&family=Roboto:wght@300;400;500&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Material+Icons&display=block"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <script type="module">
      import '@webcomponents/scoped-custom-element-registry';
      import '@omicronenergy/oscd-shell/oscd-shell.js';

      import DemoEditorPlugin from './demo-editor-plugin.js';

      const plugins = {
        menu: [
          {
            name: 'Open File',
            translations: { de: 'Datei Ã¶ffnen' },
            icon: 'folder_open',
            requireDoc: false,
            src: 'https://openscd.github.io/oscd-open/oscd-open.js',
          },
        ],
        editor: [
          {
            name: 'Trigger Wizard',
            translations: { de: 'Wizard Triggern' },
            icon: 'folder_open',
            requireDoc: true,
            tagName: 'demo-editor-plugin',
          },
        ],
      };

      const editor = document.querySelector('oscd-shell');
      editor.registry.define('demo-editor-plugin', DemoEditorPlugin);
      const params = new URL(document.location).searchParams;
      for (const [name, value] of params) {
        editor.setAttribute(name, value);
      }
      editor.plugins = plugins;

      const filename = 'sample.scd';
      const sample = await fetch(filename).then(r => r.text());
      editor.docs = {
        [filename]: new DOMParser().parseFromString(sample, 'application/xml'),
      };
      editor.docName = filename;
    </script>
    <style>
      * {
        --oscd-theme-text-font: 'Roboto';
        --oscd-theme-icon-font: 'Material Symbols Outlined';
        --oscd-theme-base3: white;
        --oscd-theme-base2: #f3f5f6;
        background-color: #1460ac;

        margin: 0px;
        padding: 0px;
      }

      /* workaround for ace-editor settings panel which is hoisted outside of the dialog and thus not affected by the dialog's styles */
      div#ace_settingsmenu * {
        background-color: var(--oscd-theme-base2);
      }
      html,
      body {
        height: 100%;
        width: 100%;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <oscd-shell></oscd-shell>
  </body>
</html>
